<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Checkout — LUXE</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600&family=Inter:wght@300;400;500&display=swap" rel="stylesheet" />

    <!-- CSS -->
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <!-- ================= HEADER ================= -->
    <nav class="navbar bg-white py-3 border-bottom">
      <div class="container">
        <a class="navbar-brand fw-bold" href="index.html">LUXE</a>
      </div>
    </nav>

    <!-- ================= CHECKOUT ================= -->
    <section class="py-5">
      <div class="container">
        <h2 class="mb-4">Checkout</h2>

        <!-- STEPS -->
        <div class="checkout-steps mb-4">
          <div class="step active">Billing</div>
          <div class="step">Shipping</div>
          <div class="step">Payment</div>
        </div>

        <div class="row g-4">
          <!-- LEFT -->
          <div class="col-md-7">
            <form id="checkoutForm">
              <!-- STEP 1 -->
              <div class="step-content active">
                <div class="checkout-card">
                  <h5>Billing Details</h5>
                  <div class="row g-3 mt-2">
                    <div class="col-md-6">
                      <input class="form-control" placeholder="First Name" required />
                    </div>
                    <div class="col-md-6">
                      <input class="form-control" placeholder="Last Name" required />
                    </div>
                    <div class="col-12">
                      <input class="form-control" placeholder="Email Address" required />
                    </div>
                  </div>
                </div>
              </div>

              <!-- STEP 2 -->
              <div class="step-content">
                <div class="checkout-card">
                  <h5>Shipping Address</h5>
                  <div class="row g-3 mt-2">
                    <div class="col-12">
                      <input class="form-control" placeholder="Street Address" required />
                    </div>
                    <div class="col-md-6">
                      <input class="form-control" placeholder="City" required />
                    </div>
                    <div class="col-md-6">
                      <input class="form-control" placeholder="Postal Code" required />
                    </div>
                  </div>
                </div>
              </div>

              <!-- STEP 3 -->
              <div class="step-content">
                <div class="checkout-card">
                  <h5>Payment</h5>
                  <p class="text-muted mb-3">Secure payment powered by Stripe</p>

                  <div id="payment-element" class="stripe-box"></div>
                </div>
              </div>

              <!-- NAV -->
              <div class="d-flex justify-content-between mt-4">
                <button type="button" id="prevStep" class="btn btn-outline-dark">Back</button>
                <button type="button" id="nextStep" class="btn btn-dark">Next</button>
              </div>
            </form>
          </div>

          <!-- RIGHT -->
          <div class="col-md-5">
            <div class="checkout-card">
              <h5>Order Summary</h5>

              <div class="cart-items mt-3"></div>

              <hr />

              <!-- COUPON -->
              <div class="input-group mb-3">
                <input class="form-control" id="couponCode" placeholder="Coupon code" />
                <button class="btn btn-outline-dark" id="applyCoupon">Apply</button>
              </div>

              <div class="summary-row">
                <span>Subtotal</span>
                <span class="cart-total">$0.00</span>
              </div>

              <div class="summary-row">
                <span>Shipping</span>
                <span>Free</span>
              </div>

              <hr />

              <div class="summary-row total">
                <span>Total</span>
                <span class="cart-total">$0.00</span>
              </div>

              <button id="pay" class="btn btn-dark w-100 mt-3">Place Order</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ================= FOOTER ================= -->
    <footer class="footer text-center">
      <div class="container">
        <small>© 2024 LUXE. All rights reserved.</small>
      </div>
    </footer>

    <!-- ================= SCRIPTS ================= -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Stripe -->
    <script src="https://js.stripe.com/v3/"></script>

    <!-- Cart + Checkout Logic -->
    <script src="js/cart.js"></script>
    <script src="js/checkout.js"></script>

    <!-- Multi-Step Logic -->
    <script>
      let step = 0;
      const steps = document.querySelectorAll('.step-content');
      const indicators = document.querySelectorAll('.step');

      function updateStep() {
        steps.forEach((s, i) => s.classList.toggle('active', i === step));
        indicators.forEach((s, i) => s.classList.toggle('active', i <= step));
        document.getElementById('prevStep').style.visibility = step === 0 ? 'hidden' : 'visible';
        document.getElementById('nextStep').style.display = step === steps.length - 1 ? 'none' : 'inline-block';
      }

      document.getElementById('nextStep').onclick = () => {
        if (step < 2) step++;
        updateStep();
      };
      document.getElementById('prevStep').onclick = () => {
        if (step > 0) step--;
        updateStep();
      };

      updateStep();
    </script>
  </body>
</html>
